# Headless超声波可视化器 - 配置示例
# 复制此文件为 .env 并根据需要修改参数

# =============================================================================
# 服务器配置
# =============================================================================
HOST=0.0.0.0
PORT=8380
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# 音频处理配置
# =============================================================================
# 音频设备名称（优先级顺序，用逗号分隔）
DEVICE_NAMES=UltraMic384K,UltraMic,384K

# 备用设备ID（如果找不到指定设备名称）
# FALLBACK_DEVICE=0

# 采样率 (Hz) - 超声波设备通常使用384kHz
SAMPLE_RATE=384000

# 声道数
CHANNELS=1

# 音频块大小 - 10ms @ 384kHz = 3840 samples
BLOCKSIZE=3840

# FFT参数
FFT_SIZE=8192
OVERLAP=0.75
WINDOW_TYPE=hann

# dB阈值 - 低于此值的数据将被忽略，提高显示效果和性能
# 推荐值:
#   -100.0: 默认，过滤噪声底线
#   -80.0:  更aggressive的过滤，只显示较强信号  
#   -60.0:  只显示非常强的信号
THRESHOLD_DB=-100.0

# =============================================================================
# 数据流配置  
# =============================================================================
# 目标帧率
TARGET_FPS=30

# gzip压缩级别 (1-9, 9最高压缩)
COMPRESSION_LEVEL=6

# 自适应帧率
ADAPTIVE_FPS=true
MIN_FPS=5
MAX_FPS=60

# 智能跳帧 - 跳过相似的帧以节省带宽
SMART_SKIP=true
SIMILARITY_THRESHOLD=0.95

# 幅度阈值 - 低于此值的帧不会发送（与THRESHOLD_DB不同，这是帧级别的控制）
MAGNITUDE_THRESHOLD=-80.0

# =============================================================================
# 数据存储
# =============================================================================
DATA_DIR=./data